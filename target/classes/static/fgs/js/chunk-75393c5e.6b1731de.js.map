{"version":3,"sources":["webpack:///./src/api/organizations.js","webpack:///./src/views/user/User.vue?a3bd","webpack:///./src/views/user/User.vue?29bb","webpack:///./src/views/user/_Info.vue?ed08","webpack:///src/views/user/_Info.vue","webpack:///./src/views/user/_Info.vue?9570","webpack:///./src/views/user/_Info.vue","webpack:///./src/views/user/_Orgs.vue?00ff","webpack:///src/views/user/_Orgs.vue","webpack:///./src/views/user/_Orgs.vue?d822","webpack:///./src/views/user/_Orgs.vue","webpack:///src/views/user/User.vue","webpack:///./src/views/user/User.vue?fce0","webpack:///./src/views/user/User.vue","webpack:///./src/components/Card.vue?80b3","webpack:///src/components/Card.vue","webpack:///./src/components/Card.vue?0412","webpack:///./src/components/Card.vue","webpack:///./src/components/Card.vue?782c"],"names":["orgApi","create","_data","data","fileName","userName","t","threshold","n","usersNum","users","orgName","Promise","resolve","reject","request","url","method","then","response","code","catch","join","submitppk","type","attrName","params","submitOrgAttppk","completeOrg","this","complete","completeOrgAttr","tempOrgInfo","error","console","log","tempOrgAttrInfo","detailInfo","declareAttr","approvalAttr","render","_vm","_h","$createElement","_c","_self","staticClass","staticRenderFns","key","attrs","scopedSlots","_u","fn","on","logoutClicked","_v","proxy","_s","name","roleTitles","role","channel","components","Card","user","org","computed","methods","actions","message","location","reload","component","$event","joinDialogFormVisible","applyDialogFormVisible","staticStyle","formatOrganization","OPKMap","scope","row","value","submitPartPK","ref","applyRules","form","model","callback","$$v","$set","expression","slot","applyForOrg","joinRules","joinForm","joinOrg","userStr","attributes","push","OPK","$refs","applyForm","validate","valid","trycompleteOrgPK","Info","Orgs","title","_t","_e","props","String","default"],"mappings":"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","file":"js/chunk-75393c5e.6b1731de.js","sourcesContent":["import request from '@/utils/request'\r\n\r\n/** 组织管理\r\n * \r\n * 申请成立新组织\r\n * 同意加入新组织\r\n * 提交 part-pk（生成组织/组织属性）\r\n * 最终确认（生成新组织/组织新属性）\r\n * 查询新增组织/组织属性申请\r\n * 查询组织信息\r\n * 声明组织新属性\r\n * 审批组织新属性\r\n**/\r\n\r\nexport const orgApi = {\r\n    /**\r\n     * 申请成立新组织\r\n     * @param {*} _data 来自前端的参数，用于发送请求，字段不一定和请求字段一致，需要转换一下\r\n     * @returns Promise\r\n     */\r\n    create: function (_data) {\r\n        // fileName 申请用户名\r\n        // t        阈值        Int\r\n        // n        组织成员总数 Int\r\n        // users    组织成员列表 List\r\n        // orgName  组织名称\r\n        const data = {\r\n            fileName: _data.userName,\r\n            t: _data.threshold,\r\n            n: _data.usersNum,\r\n            users: _data.users,\r\n            orgName: _data.orgName,\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n            request({\r\n                url: '/org/apply/creation',\r\n                method: 'post',\r\n                data\r\n            }).then(response => {\r\n                // {\r\n                //     \"code\":200   200, 成功; 其他，失败\r\n                //     \"msg\":\"success\",  描述\r\n                //     \"data\": null\r\n                // }\r\n                if (response.code === 200) {\r\n                    resolve(response.data)\r\n                }\r\n                else {\r\n                    reject(response)\r\n                }\r\n            }).catch(reject)\r\n        })\r\n    },\r\n\r\n    /**\r\n     * 同意加入新组织\r\n     * @param {*} _data 参数\r\n     * @returns Promise\r\n     */\r\n    join: function ({ userName, orgName }) {\r\n        // fileName 用户名\r\n        // orgName  组织名称\r\n        const data = {\r\n            fileName: userName,\r\n            orgName: orgName,\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n            request({\r\n                url: '/org/apply/creation/approval',\r\n                method: 'post',\r\n                data\r\n            }).then(response => {\r\n                // {\r\n                //     \"code\":200   200, 成功; 其他，失败\r\n                //     \"msg\":\"success\",  描述\r\n                //     \"data\":null\r\n                // }\r\n                if (response.code === 200) {\r\n                    resolve(response.data)\r\n                }\r\n                else {\r\n                    reject(response)\r\n                }\r\n            }).catch(reject)\r\n        })\r\n    },\r\n\r\n    /**\r\n     * 提交 part-pk 生成组织 \r\n     * @param {*} _data 参数\r\n     * @returns Promise\r\n     */\r\n    submitppk: function ({ orgName, userName }) {\r\n        // type     类型      CREATION/ ATTRIBUTE\r\n        // orgName  组织名称\r\n        // fileName 用户名  \r\n        // attrName 属性名    生成组织时为’’\r\n        const data = {\r\n            type: 'CREATION',\r\n            orgName,\r\n            fileName: userName,\r\n            attrName: \"\",\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n            request({\r\n                url: '/org/part-pk',\r\n                method: 'post',\r\n                params: data\r\n            }).then(response => {\r\n                // {\r\n                //     \"code\":200   200, 成功; 其他，失败\r\n                //     \"msg\":null,  描述\r\n                //     \"data\": {}\r\n                // }\r\n                if (response.code === 200) {\r\n                    resolve(response.data)\r\n                }\r\n                else {\r\n                    reject(response)\r\n                }\r\n            }).catch(reject)\r\n        })\r\n    },\r\n\r\n    /**\r\n     * 提交 part-pk 生成组织属性 \r\n     * @param {*} _data 参数\r\n     * @returns Promise\r\n     */\r\n    submitOrgAttppk: function ({ orgName, userName, attrName }) {\r\n        // type     类型      CREATION/ ATTRIBUTE\r\n        // orgName  组织名称\r\n        // fileName 用户名 \r\n        // attrName 属性名    生成组织时为’’\r\n        const data = {\r\n            type: 'ATTRIBUTE',\r\n            orgName,\r\n            fileName: userName,\r\n            attrName,\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n            request({\r\n                url: '/org/part-pk',\r\n                method: 'post',\r\n                params: data\r\n            }).then(response => {\r\n                // {\r\n                //     \"code\":200   200, 成功; 其他，失败\r\n                //     \"msg\":null,  描述\r\n                //     \"data\": {}\r\n                // }\r\n                if (response.code === 200) {\r\n                    resolve(response.data)\r\n                }\r\n                else {\r\n                    reject(response)\r\n                }\r\n            }).catch(reject)\r\n        })\r\n    },\r\n\r\n    /**\r\n     * 最终确认，生成新组织\r\n     * @param {*} _data 参数\r\n     * @returns Promise\r\n     */\r\n    completeOrg: function ({ orgName, userName }) {\r\n        // orgName  组织名称\r\n        // type     类型      CREATION \r\n        // userName 用户名    生成组织属性时为’’\r\n        // attrName 属性名    生成组织时为’’\r\n        const data = {\r\n            type: \"CREATION\",\r\n            orgName: orgName,\r\n            userName: userName,\r\n            attrName: \"\",\r\n        }\r\n\r\n        return this.complete(data)\r\n    },\r\n\r\n    /**\r\n     * 最终确认，生成新组织新属性 \r\n     * @param {*} _data 参数\r\n     * @returns Promise\r\n     */\r\n    completeOrgAttr: function ({ orgName, userName, attrName }) {\r\n        // type     类型      ATTRIBUTE\r\n        // orgName  组织名称\r\n        // userName 用户名\r\n        // attrName 属性名\r\n        return this.complete({\r\n            type: \"ATTRIBUTE\", \r\n            orgName, \r\n            userName, \r\n            attrName\r\n        })\r\n    },\r\n\r\n    /**\r\n     * 最终确认（生成新组织/组织新属性）\r\n     * @param {*} _data 参数\r\n     * @returns Promise\r\n     */\r\n    complete: function ({ type, orgName, userName, attrName }) {\r\n        // type     类型      CREATION/ ATTRIBUTE\r\n        // orgName  组织名称\r\n        // fileName 用户名    生成组织属性时为’’\r\n        // attrName 属性名    生成组织时为’’\r\n        const data = {\r\n            type: type,\r\n            orgName: orgName,\r\n            fileName: userName,\r\n            attrName: attrName,\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n            request({\r\n                url: '/org/complete-pk',\r\n                method: 'post',\r\n                params: data,\r\n            }).then(response => {\r\n                // {\r\n                //     \"code\":200   200, 成功; 其他，失败\r\n                //     \"msg\":null,  描述\r\n                //     \"data\":null\r\n                // }\r\n                if (response.code === 200) {\r\n                    resolve(response.data)\r\n                }\r\n                else {\r\n                    reject(response)\r\n                }\r\n            }).catch(reject)\r\n        })\r\n    },\r\n\r\n    /**\r\n     * 查询新增组织申请\r\n     * @param {*} _data 参数\r\n     * @returns Promise\r\n     */\r\n    tempOrgInfo: function ({ orgName }) {\r\n        // type     类型      CREATION/ ATTRIBUTE\r\n        // orgName  组织名称\r\n        // attrName 属性名    生成组织时为’’\r\n        const params = {\r\n            type: \"CREATION\",\r\n            orgName: orgName,\r\n            attrName: \"\",\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n            request({\r\n                url: '/org/apply',\r\n                method: 'get',\r\n                params,\r\n            }).then(response => {\r\n                // {\r\n                //     \"code\":200   200, 成功; 其他，失败\r\n                //     \"msg\":\"success\", 描述\r\n                //     \"data\": {\r\n                //          String orgId;\r\n                //          Map<String, Boolean> uidMap;\r\n                //          Map<String, Map<String, String>> shareMap;\r\n                //          Map<String, String> opkMap;\r\n                //          Integer t;\r\n                //          Integer n;\r\n                //          String fromUserName;\r\n                //          OrgApplyStatusEnum status;\r\n                //          String createTime;\r\n                //          String attrName;\r\n                //          OrgApplyTypeEnum type;\r\n                //      }\r\n                // }\r\n                if (response.code === 200) {\r\n                    resolve(response.data)\r\n                }\r\n                else {\r\n                    reject(response)\r\n                }\r\n            }).catch(error => {\r\n                // 调用 Mock 的数据\r\n                if (error) {\r\n                    console.log(error);\r\n                }\r\n                else reject(error)\r\n            })\r\n        })\r\n    },\r\n\r\n    /**\r\n     * 查询新增组织属性申请\r\n     * @param {*} _data 参数\r\n     * @returns Promise\r\n     */\r\n    tempOrgAttrInfo: function ({ orgName, attrName }) {\r\n        // type     类型      ATTRIBUTE\r\n        // orgName  组织名称\r\n        // attrName 属性名    \r\n        const params = {\r\n            type: \"ATTRIBUTE\",\r\n            orgName: orgName,\r\n            attrName: attrName,\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n            request({\r\n                url: '/org/apply',\r\n                method: 'get',\r\n                params,\r\n            }).then(response => {\r\n                // {\r\n                //     \"code\":200   200, 成功; 其他，失败\r\n                //     \"msg\":\"success\", 描述\r\n                //     \"data\": {\r\n                //          String orgId;\r\n                //          Map<String, Boolean> uidMap;\r\n                //          Map<String, Map<String, String>> shareMap;\r\n                //          Map<String, String> opkMap;\r\n                //          Integer t;\r\n                //          Integer n;\r\n                //          String fromUserName;\r\n                //          OrgApplyStatusEnum status;\r\n                //          String createTime;\r\n                //          String attrName;\r\n                //          OrgApplyTypeEnum type;\r\n                //      }\r\n                // }\r\n                if (response.code === 200) {\r\n                    resolve(response.data)\r\n                }\r\n                else {\r\n                    reject(response)\r\n                }\r\n            }).catch(error => {\r\n                // 调用 Mock 的数据\r\n                if (error) {\r\n                    console.log(error);\r\n                }\r\n                else reject(error)\r\n            })\r\n        })\r\n    },\r\n\r\n    /**\r\n     * 查询组织信息\r\n     * @param {*} _data 参数\r\n     * @returns Promise\r\n     */\r\n    detailInfo: function ({ orgName }) {\r\n        // 以下参数放在 params 中\r\n        // orgName  组织名称\r\n        const data = {\r\n            orgName\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n            request({\r\n                url: '/org/',\r\n                method: 'get',\r\n                params: data\r\n            }).then(response => {\r\n                // {\r\n                //     \"code\":200   200, 成功; 其他，失败\r\n                //     \"msg\":\"success\", 描述\r\n                //     \"data\": {\r\n                //          String orgId;\r\n                //          List<String> uidSet;\r\n                //          List<String> attrSet;\r\n                //          Integer t;\r\n                //          Integer n;\r\n                //          String opk;\r\n                //      }\r\n                // }\r\n                if (response.code === 200) {\r\n                    resolve(response.data)\r\n                }\r\n                else {\r\n                    reject(response)\r\n                }\r\n            }).catch(reject)\r\n        })\r\n    },\r\n\r\n    /**\r\n     * 声明组织新属性\r\n     * @param {*} _data 参数\r\n     * @returns Promise\r\n     */\r\n    declareAttr: function ({orgName, userName, attrName}) {\r\n        // orgName  组织名称\r\n        // fileName 用户名\r\n        // attrName 属性名\r\n        const data = {\r\n            orgName,\r\n            fileName: userName,\r\n            attrName,\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n            request({\r\n                url: '/org/apply/attribute',\r\n                method: 'post',\r\n                data\r\n            }).then(response => {\r\n                // {\r\n                //     \"code\":200   200, 成功; 其他，失败\r\n                //     \"msg\":\"success\", 描述\r\n                //     \"data\": object   返回数据\r\n                // }\r\n                if (response.code === 200) {\r\n                    resolve(response.data)\r\n                }\r\n                else {\r\n                    reject(response)\r\n                }\r\n            }).catch(reject)\r\n        })\r\n    },\r\n\r\n    /**\r\n     * 审批组织新属性\r\n     * @param {*} data 参数\r\n     * @returns Promise\r\n     */\r\n    approvalAttr: function ({userName, orgName, attrName}) {\r\n        // fileName 用户名\r\n        // orgName  组织名称\r\n        // attrName 属性名\r\n        const data = {\r\n            fileName: userName,\r\n            orgName,\r\n            attrName,\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n            request({\r\n                url: '/org/apply/attribute/approval',\r\n                method: 'post',\r\n                data,\r\n            }).then(response => {\r\n                // {\r\n                //     \"code\":200   200, 成功; 其他，失败\r\n                //     \"msg\":\"success\", 描述\r\n                //     \"data\": object   返回数据\r\n                // }\r\n                if (response.code === 200) {\r\n                    resolve(response.data)\r\n                }\r\n                else {\r\n                    reject(response)\r\n                }\r\n            }).catch(reject)\r\n        })\r\n    },\r\n}","export * from \"-!../../../node_modules/.pnpm/registry.npmmirror.com+mini-css-extract-plugin@0.9.0_webpack@4.46.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/.pnpm/registry.npmmirror.com+css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/.pnpm/registry.npmmirror.com+postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=style&index=0&id=250e63b7&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cards\"},[_c('Info'),_c('Orgs')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Card',{key:\"-1\",attrs:{\"title\":\"我的信息\",\"data-index\":\"-1\"},scopedSlots:_vm._u([{key:\"op\",fn:function(){return [_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.logoutClicked}},[_vm._v(\"退出登录\")])]},proxy:true}])},[_c('el-descriptions',{attrs:{\"column\":1}},[_c('el-descriptions-item',{attrs:{\"label\":\"用户名\"}},[_vm._v(_vm._s(_vm.name)+\" \")]),_c('el-descriptions-item',{attrs:{\"label\":\"我的角色\"}},[_vm._v(\" \"+_vm._s(_vm.roleTitles[_vm.role])+\" \")]),_c('el-descriptions-item',{attrs:{\"label\":\"所在通道\"}},[_vm._v(_vm._s(_vm.channel))])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <Card title=\"我的信息\" key=\"-1\" data-index=\"-1\">\r\n    <template v-slot:op>\r\n      <el-button size=\"small\" @click=\"logoutClicked\">退出登录</el-button>\r\n    </template>\r\n    <el-descriptions :column=\"1\">\r\n      <el-descriptions-item label=\"用户名\">{{ name }} </el-descriptions-item>\r\n      <el-descriptions-item label=\"我的角色\">\r\n        {{ roleTitles[role]}}\r\n      </el-descriptions-item>\r\n      <el-descriptions-item label=\"所在通道\">{{ channel }}</el-descriptions-item>\r\n    </el-descriptions>\r\n  </Card>\r\n</template>\r\n\r\n<script>\r\n// @ is an alias to /src\r\nimport Card from \"@/components/Card.vue\";\r\nimport { getters } from \"@/store/store\";\r\nimport { actions } from \"@/store/actions\";\r\n\r\nexport default {\r\n  name: \"Info\",\r\n\r\n  components: {\r\n    Card,\r\n  },\r\n  data() {\r\n    return {\r\n      roleTitles: {\r\n        user: \"普通用户\",\r\n        org: \"机构用户\",\r\n      },\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...getters.mapUser([\"name\", \"channel\", \"role\"]),\r\n  },\r\n\r\n  methods: {\r\n    logoutClicked() {\r\n      actions.logout().then(() => {\r\n        this.$message({\r\n          message: \"退出登录\",\r\n          type: \"success\",\r\n        });\r\n        location.reload();\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>","import mod from \"-!../../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/.pnpm/registry.nlark.com+thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/registry.npmmirror.com+babel-loader@8.2.3_c5cihxqta4yrmitykip7so3rqm/node_modules/babel-loader/lib/index.js!../../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/index.js??vue-loader-options!./_Info.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/.pnpm/registry.nlark.com+thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/registry.npmmirror.com+babel-loader@8.2.3_c5cihxqta4yrmitykip7so3rqm/node_modules/babel-loader/lib/index.js!../../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/index.js??vue-loader-options!./_Info.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./_Info.vue?vue&type=template&id=5898a8c9&\"\nimport script from \"./_Info.vue?vue&type=script&lang=js&\"\nexport * from \"./_Info.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Card',{attrs:{\"title\":\"我的组织\"},scopedSlots:_vm._u([{key:\"op\",fn:function(){return [_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.joinDialogFormVisible = true}}},[_vm._v(\" 加入组织 \")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.applyDialogFormVisible = true}}},[_vm._v(\" 申请创建组织 \")])]},proxy:true}])},[(_vm.OPKMap)?_c('div',[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.formatOrganization(_vm.OPKMap)}},[_c('el-table-column',{attrs:{\"show-overflow-tooltip\":\"\",\"prop\":\"name\",\"label\":\"组织名称\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"show-overflow-tooltip\":\"\",\"prop\":\"value\",\"label\":\"组织公钥\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(scope.row.value || \"暂无\")+\" \")]}}],null,false,508938292)}),_c('el-table-column',{attrs:{\"label\":\"\",\"width\":\"50\",\"align\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('router-link',{attrs:{\"to\":(\"/organization/\" + (scope.row.name))}},[_c('el-button',{attrs:{\"type\":\"text\"}},[_vm._v(\"详情\")])],1)]}}],null,false,2917708346)}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"140\",\"align\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.submitPartPK(scope.row)}}},[_vm._v(\" 提交组织秘密 \")])]}}],null,false,3126450051)})],1)],1):_c('el-empty',{attrs:{\"image-size\":100,\"description\":\"没有正在申请的属性\"}})],1),_c('el-dialog',{attrs:{\"title\":\"申请成立新组织\",\"visible\":_vm.applyDialogFormVisible},on:{\"update:visible\":function($event){_vm.applyDialogFormVisible=$event}}},[_c('el-form',{ref:\"applyForm\",attrs:{\"rules\":_vm.applyRules,\"model\":_vm.form,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"prop\":\"orgName\",\"label\":\"组织名称\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入组织名称\"},model:{value:(_vm.form.orgName),callback:function ($$v) {_vm.$set(_vm.form, \"orgName\", $$v)},expression:\"form.orgName\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"threshold\",\"label\":\"阈值\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入阈值\"},model:{value:(_vm.form.threshold),callback:function ($$v) {_vm.$set(_vm.form, \"threshold\", $$v)},expression:\"form.threshold\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"userStr\",\"label\":\"其它成员\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入除您之外包含的其它成员\"},model:{value:(_vm.form.userStr),callback:function ($$v) {_vm.$set(_vm.form, \"userStr\", $$v)},expression:\"form.userStr\"}})],1)],1),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.applyDialogFormVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.applyForOrg}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"加入组织\",\"visible\":_vm.joinDialogFormVisible},on:{\"update:visible\":function($event){_vm.joinDialogFormVisible=$event}}},[_c('el-form',{ref:\"joinForm\",attrs:{\"rules\":_vm.joinRules,\"model\":_vm.joinForm,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"prop\":\"orgName\",\"label\":\"组织名称\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入组织名称\"},model:{value:(_vm.joinForm.orgName),callback:function ($$v) {_vm.$set(_vm.joinForm, \"orgName\", $$v)},expression:\"joinForm.orgName\"}})],1)],1),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.joinDialogFormVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.joinOrg}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <Card title=\"我的组织\">\r\n      <template v-slot:op>\r\n        <el-button size=\"small\" @click=\"joinDialogFormVisible = true\"> 加入组织 </el-button>\r\n        <el-button size=\"small\" type=\"primary\" @click=\"applyDialogFormVisible = true\">\r\n          申请创建组织\r\n        </el-button>\r\n      </template>\r\n      <div v-if=\"OPKMap\">\r\n        <el-table :data=\"formatOrganization(OPKMap)\" style=\"width: 100%\">\r\n          <el-table-column show-overflow-tooltip prop=\"name\" label=\"组织名称\" width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column show-overflow-tooltip prop=\"value\" label=\"组织公钥\">\r\n            <template slot-scope=\"scope\">\r\n              {{ scope.row.value || \"暂无\" }}\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"\" width=\"50\" align=\"right\">\r\n            <template slot-scope=\"scope\">\r\n              <router-link :to=\"`/organization/${scope.row.name}`\"> <el-button type=\"text\">详情</el-button> </router-link>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"操作\" width=\"140\" align=\"right\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button size=\"mini\" @click=\"submitPartPK(scope.row)\"> 提交组织秘密 </el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n      <el-empty v-else :image-size=\"100\" description=\"没有正在申请的属性\"></el-empty>\r\n    </Card>\r\n\r\n    <el-dialog title=\"申请成立新组织\" :visible.sync=\"applyDialogFormVisible\">\r\n      <el-form ref=\"applyForm\" :rules=\"applyRules\" :model=\"form\" label-width=\"80px\">\r\n        <el-form-item prop=\"orgName\" label=\"组织名称\">\r\n          <el-input v-model=\"form.orgName\" placeholder=\"请输入组织名称\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item prop=\"threshold\" label=\"阈值\">\r\n          <el-input v-model=\"form.threshold\" placeholder=\"请输入阈值\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item prop=\"userStr\" label=\"其它成员\">\r\n          <el-input v-model=\"form.userStr\" placeholder=\"请输入除您之外包含的其它成员\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\">\r\n        <el-button @click=\"applyDialogFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"applyForOrg\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <el-dialog title=\"加入组织\" :visible.sync=\"joinDialogFormVisible\">\r\n      <el-form ref=\"joinForm\" :rules=\"joinRules\" :model=\"joinForm\" label-width=\"80px\">\r\n        <el-form-item prop=\"orgName\" label=\"组织名称\">\r\n          <el-input v-model=\"joinForm.orgName\" placeholder=\"请输入组织名称\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\">\r\n        <el-button @click=\"joinDialogFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"joinOrg\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// @ is an alias to /src\r\nimport Card from \"@/components/Card.vue\";\r\nimport { orgApi } from \"@/api/organizations\";\r\nimport { getters } from \"@/store/store\";\r\n\r\nexport default {\r\n  name: \"Mine\",\r\n  components: {\r\n    Card,\r\n  },\r\n\r\n  computed: {\r\n    ...getters.mapUser([\"OPKMap\"]),\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      applyDialogFormVisible: false,\r\n      form: {\r\n        threshold: \"\",\r\n        userStr: \"\",\r\n        orgName: \"\",\r\n      },\r\n      applyRules: {\r\n        orgName: [{ required: true, trigger: \"blur\", message: \"组织名不能为空\" }],\r\n        threshold: [{ required: true, trigger: \"blur\", message: \"阈值不能为空\" }],\r\n        userStr: [{ required: true, trigger: \"blur\", message: \"成员不能为空\" }],\r\n      },\r\n      joinDialogFormVisible: false,\r\n      joinForm: {\r\n        orgName: \"\",\r\n      },\r\n      joinRules: {\r\n        orgName: [{ required: true, trigger: \"blur\", message: \"组织名不能为空\" }],\r\n      },\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    formatOrganization(OPKMap) {\r\n      let attributes = [];\r\n      for (let key of Object.keys(OPKMap)) {\r\n        attributes.push({\r\n          name: key,\r\n          value: OPKMap[key].OPK,\r\n        });\r\n      }\r\n      return attributes;\r\n    },\r\n\r\n    applyForOrg() {\r\n      const userName = getters.userName();\r\n      if (!userName) return;\r\n\r\n      this.$refs.applyForm.validate((valid) => {\r\n        if (!valid) return;\r\n\r\n        const { threshold, userStr, orgName } = this.form;\r\n        const users = userStr.split(\" \");\r\n        users.push(userName);\r\n\r\n        orgApi\r\n          .create({\r\n            userName,\r\n            threshold,\r\n            users,\r\n            orgName,\r\n            usersNum: users.length,\r\n          })\r\n          .then(() => {\r\n            this.$message({\r\n              message: \"申请成功\",\r\n              duration: 2 * 1000,\r\n              type: \"success\",\r\n            });\r\n          })\r\n          .catch((e) => {\r\n            this.$message({\r\n              message: e.message,\r\n              type: \"error\",\r\n            });\r\n          })\r\n          .finally(() => {\r\n            this.applyDialogFormVisible = false;\r\n          });\r\n      });\r\n    },\r\n\r\n    joinOrg() {\r\n      const userName = getters.userName();\r\n      if (!userName) return;\r\n\r\n      this.$refs.joinForm.validate((valid) => {\r\n        if (!valid) return;\r\n\r\n        const { orgName } = this.joinForm;\r\n\r\n        orgApi\r\n          .join({ userName, orgName })\r\n          .then(() => {\r\n            this.$message({\r\n              message: \"加入成功\",\r\n              duration: 2 * 1000,\r\n              type: \"success\",\r\n            });\r\n          })\r\n          .catch((e) => {\r\n            this.$message({\r\n              message: e.message,\r\n              type: \"error\",\r\n            });\r\n          })\r\n          .finally(() => {\r\n            this.applyDialogFormVisible = false;\r\n          });\r\n      });\r\n    },\r\n\r\n    submitPartPK(org) {\r\n      const userName = getters.userName();\r\n\r\n      orgApi\r\n        .submitppk({ userName, orgName: org.name })\r\n        .then(() => {\r\n          this.$message({\r\n            message: \"提交成功\",\r\n            duration: 2 * 1000,\r\n            type: \"success\",\r\n          });\r\n          // 尝试最终确认\r\n          this.trycompleteOrgPK(userName, org.name);\r\n        })\r\n        .catch((e) => {\r\n          this.$message({\r\n            message: e.message,\r\n            type: \"error\",\r\n          });\r\n        });\r\n    },\r\n\r\n    trycompleteOrgPK(userName, orgName) {\r\n      orgApi\r\n        .completeOrg({ userName, orgName })\r\n        .then(() => {\r\n          this.$message({\r\n            message: \"组织已确认创建\",\r\n            duration: 2 * 1000,\r\n            type: \"success\",\r\n          });\r\n        })\r\n        .catch(console.log);\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/.pnpm/registry.nlark.com+thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/registry.npmmirror.com+babel-loader@8.2.3_c5cihxqta4yrmitykip7so3rqm/node_modules/babel-loader/lib/index.js!../../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/index.js??vue-loader-options!./_Orgs.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/.pnpm/registry.nlark.com+thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/registry.npmmirror.com+babel-loader@8.2.3_c5cihxqta4yrmitykip7so3rqm/node_modules/babel-loader/lib/index.js!../../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/index.js??vue-loader-options!./_Orgs.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./_Orgs.vue?vue&type=template&id=d2745f02&\"\nimport script from \"./_Orgs.vue?vue&type=script&lang=js&\"\nexport * from \"./_Orgs.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"cards\">\r\n    <Info />\r\n    <Orgs />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Info from \"./_Info.vue\";\r\nimport Orgs from \"./_Orgs.vue\";\r\n\r\nexport default {\r\n  name: \"User\",\r\n  components: {\r\n    Info,\r\n    Orgs,\r\n  },\r\n  data() {\r\n    return {};\r\n  },\r\n  methods: {},\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.cards > div {\r\n  margin-bottom: var(--row-distance, 10px);\r\n}\r\n</style>","import mod from \"-!../../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/.pnpm/registry.nlark.com+thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/registry.npmmirror.com+babel-loader@8.2.3_c5cihxqta4yrmitykip7so3rqm/node_modules/babel-loader/lib/index.js!../../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/.pnpm/registry.nlark.com+thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/registry.npmmirror.com+babel-loader@8.2.3_c5cihxqta4yrmitykip7so3rqm/node_modules/babel-loader/lib/index.js!../../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./User.vue?vue&type=template&id=250e63b7&scoped=true&\"\nimport script from \"./User.vue?vue&type=script&lang=js&\"\nexport * from \"./User.vue?vue&type=script&lang=js&\"\nimport style0 from \"./User.vue?vue&type=style&index=0&id=250e63b7&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"250e63b7\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"card\"},[(_vm.title)?_c('div',{staticClass:\"card-head\"},[_vm._v(\" \"+_vm._s(_vm.title)+\" \"),_c('div',{staticStyle:{\"float\":\"right\"}},[_vm._t(\"op\")],2)]):_vm._e(),_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"card\">\r\n    <div class=\"card-head\" v-if=\"title\">\r\n      {{ title }}\r\n      <div style=\"float: right\">\r\n        <slot name=\"op\"> </slot>\r\n      </div>\r\n    </div>\r\n    <slot></slot>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Card\",\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.card {\r\n  padding: var(--content-padding, 16px);\r\n  background-color: var(--bg-color-0);\r\n  color: var(--ft-color-0);\r\n}\r\n\r\n.card:hover {\r\n  box-shadow: 1px 1px 4px 0 rgba(0, 0, 0, 0.13);\r\n  transition: box-shadow 0.3s;\r\n}\r\n\r\n.card-head {\r\n  font-weight: 500;\r\n  line-height: 54px;\r\n  margin-top: -16px;\r\n}\r\n</style>","import mod from \"-!../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/.pnpm/registry.nlark.com+thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../node_modules/.pnpm/registry.npmmirror.com+babel-loader@8.2.3_c5cihxqta4yrmitykip7so3rqm/node_modules/babel-loader/lib/index.js!../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/index.js??vue-loader-options!./Card.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/.pnpm/registry.nlark.com+thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../node_modules/.pnpm/registry.npmmirror.com+babel-loader@8.2.3_c5cihxqta4yrmitykip7so3rqm/node_modules/babel-loader/lib/index.js!../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/index.js??vue-loader-options!./Card.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Card.vue?vue&type=template&id=88a16ad0&scoped=true&\"\nimport script from \"./Card.vue?vue&type=script&lang=js&\"\nexport * from \"./Card.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Card.vue?vue&type=style&index=0&id=88a16ad0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"88a16ad0\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/.pnpm/registry.npmmirror.com+mini-css-extract-plugin@0.9.0_webpack@4.46.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/.pnpm/registry.npmmirror.com+css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/.pnpm/registry.npmmirror.com+postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/index.js??vue-loader-options!./Card.vue?vue&type=style&index=0&id=88a16ad0&scoped=true&lang=css&\""],"sourceRoot":""}