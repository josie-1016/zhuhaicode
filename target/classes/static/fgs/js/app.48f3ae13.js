(function(e){function n(n){for(var r,a,u=n[0],i=n[1],s=n[2],f=0,d=[];f<u.length;f++)a=u[f],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&d.push(c[a][0]),c[a]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);h&&h(n);while(d.length)d.shift()();return o.push.apply(o,s||[]),t()}function t(){for(var e,n=0;n<o.length;n++){for(var t=o[n],r=!0,a=1;a<t.length;a++){var u=t[a];0!==c[u]&&(r=!1)}r&&(o.splice(n--,1),e=i(i.s=t[0]))}return e}var r={},a={app:0},c={app:0},o=[];function u(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-2498b675":"cc68f767","chunk-27f504dc":"aebb4f9f","chunk-2d5c1003":"6e1175ed","chunk-2f2a347a":"787b394a","chunk-3eac68ce":"b6f11ccb","chunk-4dad9452":"e6cb6698","chunk-5254e23e":"fe6523d0","chunk-555fe04c":"8dbd1e65","chunk-6566b380":"2b7c5c60","chunk-130f6287":"25c8c15f","chunk-4796356c":"5d6221a1","chunk-5c1174bf":"079f2b18","chunk-75393c5e":"6b1731de"}[e]+".js"}function i(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.e=function(e){var n=[],t={"chunk-2498b675":1,"chunk-27f504dc":1,"chunk-2d5c1003":1,"chunk-2f2a347a":1,"chunk-3eac68ce":1,"chunk-4dad9452":1,"chunk-5254e23e":1,"chunk-555fe04c":1,"chunk-130f6287":1,"chunk-4796356c":1,"chunk-5c1174bf":1,"chunk-75393c5e":1};a[e]?n.push(a[e]):0!==a[e]&&t[e]&&n.push(a[e]=new Promise((function(n,t){for(var r="css/"+({}[e]||e)+"."+{"chunk-2498b675":"d6dbeb40","chunk-27f504dc":"3f975861","chunk-2d5c1003":"3f975861","chunk-2f2a347a":"3f975861","chunk-3eac68ce":"a6d5e8bc","chunk-4dad9452":"77a208e0","chunk-5254e23e":"507bd22d","chunk-555fe04c":"8b2937c2","chunk-6566b380":"31d6cfe0","chunk-130f6287":"290ba10d","chunk-4796356c":"13acc32b","chunk-5c1174bf":"2a350115","chunk-75393c5e":"9ae81a3d"}[e]+".css",c=i.p+r,o=document.getElementsByTagName("link"),u=0;u<o.length;u++){var s=o[u],f=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(f===r||f===c))return n()}var d=document.getElementsByTagName("style");for(u=0;u<d.length;u++){s=d[u],f=s.getAttribute("data-href");if(f===r||f===c)return n()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=n,h.onerror=function(n){var r=n&&n.target&&n.target.src||c,o=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete a[e],h.parentNode.removeChild(h),t(o)},h.href=c;var l=document.getElementsByTagName("head")[0];l.appendChild(h)})).then((function(){a[e]=0})));var r=c[e];if(0!==r)if(r)n.push(r[2]);else{var o=new Promise((function(n,t){r=c[e]=[n,t]}));n.push(r[2]=o);var s,f=document.createElement("script");f.charset="utf-8",f.timeout=120,i.nc&&f.setAttribute("nonce",i.nc),f.src=u(e);var d=new Error;s=function(n){f.onerror=f.onload=null,clearTimeout(h);var t=c[e];if(0!==t){if(t){var r=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,t[1](d)}c[e]=void 0}};var h=setTimeout((function(){s({type:"timeout",target:f})}),12e4);f.onerror=f.onload=s,document.head.appendChild(f)}return Promise.all(n)},i.m=e,i.c=r,i.d=function(e,n,t){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)i.d(t,r,function(n){return e[n]}.bind(null,r));return t},i.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],f=s.push.bind(s);s.push=n,s=s.slice();for(var d=0;d<s.length;d++)n(s[d]);var h=f;o.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"07a4":function(e,n,t){"use strict";t.d(n,"a",(function(){return o})),t.d(n,"b",(function(){return u}));var r=t("cc39"),a=(t("bdf9"),t("0721"),t("ee64"),t("1ec0")),c=a["default"].observable({user:!1}),o={userName:function(){return c.user.name},isLogin:function(){return!!c.user},mapUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n={};return e.forEach((function(e){return n[e]=function(){return c.user[e]}})),n},properties:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n={};return e.forEach((function(e){return n[e]=c.user[e]})),n}},u={setUser:function(e){c.user=Object(r["a"])({name:e.Name,password:e.Password,role:e.UserType,channel:e.Channel},e)}}},"371c":function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));t("2646"),t("1349"),t("ac30"),t("f6a5"),t("6ff0"),t("8281"),t("106c");function r(){}function a(e){return function(n){return function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];e.apply(this,[n].concat(r))}}}var c=a(r)(3)},"56d7":function(e,n,t){"use strict";t.r(n);t("5a18"),t("761e"),t("9eb1"),t("d5ae");var r=t("1ec0"),a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},c=[],o={name:"App",data:function(){return{}},computed:{},methods:{}},u=o,i=(t("6ceb"),t("52e0")),s=Object(i["a"])(u,a,c,!1,null,"38dc8941",null),f=s.exports,d=(t("0721"),t("7fa7"),t("042e"),t("438b")),h=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div")},l=[],p={name:"Home",mounted:function(){this.$router.push("user")}},m=p,b=Object(i["a"])(m,h,l,!1,null,null,null),v=b.exports;r["default"].use(d["a"]);var k=[{path:"/",name:"Home",component:v,meta:{headerClass:"transparent-header"}},{path:"/login",name:"login",component:function(){return t.e("chunk-2498b675").then(t.bind(null,"a55b"))}},{path:"/signup",name:"signup",component:function(){return Promise.all([t.e("chunk-6566b380"),t.e("chunk-130f6287")]).then(t.bind(null,"5c9c"))}},{path:"/allfiles",name:"allfiles",component:function(){return Promise.all([t.e("chunk-6566b380"),t.e("chunk-5c1174bf")]).then(t.bind(null,"3bc5"))}},{path:"/user",name:"user",component:function(){return t.e("chunk-5254e23e").then(t.bind(null,"1511"))},children:[{path:"",component:function(){return t.e("chunk-75393c5e").then(t.bind(null,"9419"))}},{path:"/attr",component:function(){return t.e("chunk-2d5c1003").then(t.bind(null,"6750"))}},{path:"/attr/application",component:function(){return t.e("chunk-555fe04c").then(t.bind(null,"4d55"))}},{path:"/attr/approve",component:function(){return t.e("chunk-27f504dc").then(t.bind(null,"a185"))}},{path:"/attr/history",component:function(){return t.e("chunk-2f2a347a").then(t.bind(null,"c41c"))}},{path:"/files",component:function(){return Promise.all([t.e("chunk-6566b380"),t.e("chunk-4796356c")]).then(t.bind(null,"87ff"))}},{path:"/files/upload",component:function(){return t.e("chunk-3eac68ce").then(t.bind(null,"6a41"))}},{path:"/organization/:org",component:function(){return t.e("chunk-4dad9452").then(t.bind(null,"5186"))}}]}],g=new d["a"]({routes:k}),y=g,w=t("70f6"),P=t.n(w),O=(t("8aa1"),t("723b")),j=(t("d065"),t("07a4")),N=t("63e0");t("106c");function A(e){var n=void 0;return function(){if(n)return n;for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n=e.call.apply(e,[this].concat(r)).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)})).finally((function(){n=void 0})),n}}var E=A(N["a"].silentLogin).bind(N["a"]),T="/login",C=["/","/signup",T,"/certificates"];E(),y.beforeEach(function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(n,t,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=j["a"].isLogin(),a?n.path===T?r({path:"/"}):r():-1!==C.indexOf(n.path)?r():E().then((function(){r()})).catch((function(){r({path:T,query:{redirect:n.path}})}));case 2:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}());t("5aea");r["default"].use(P.a),r["default"].config.productionTip=!1,new r["default"]({router:y,render:function(e){return e(f)}}).$mount("#app")},"5aea":function(e,n,t){},"63e0":function(e,n,t){"use strict";t.d(n,"a",(function(){return m}));t("bdf9"),t("0721"),t("106c");var r=t("07a4"),a=t("c24f"),c=t("f8ce"),o=(t("ac30"),t("f6a5"),t("cc39"));t("6ff0"),t("eb63"),t("cb01"),t("d8a4"),t("20d6");function u(e){var n=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return n?decodeURIComponent(n[1]):void 0}function i(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=Object(o["a"])({path:"/"},t),t.expires instanceof Date&&(t.expires=t.expires.toUTCString());var r=encodeURIComponent(e)+"="+encodeURIComponent(n);for(var a in t){r+="; "+a;var c=t[a];!0!==c&&(r+="="+c)}document.cookie=r}function s(e){i(e,"",{"max-age":-1})}var f="Admin-Token";function d(){var e=u(f);if(e){var n=e.split("-");return 2===n.length&&{name:n[0],password:n[1]}}return!1}function h(e){return i(f,e,{secure:!0,"max-age":3600})}function l(){return s(f)}var p=t("371c"),m={login:function(e,n){var t=e.name,c=e.password,o=e.cert;return new Promise((function(e,u){a["a"].login({name:t,password:c,cert:o},n).then((function(n){h("".concat(t,"-").concat(c)),r["b"].setUser(n),e(n)})).catch((function(e){u(e)}))}))},silentLogin:function(){var e=d();if(Object(p["a"])(e),!e)return Promise.reject("");var n=e;return this.login(n)},logout:function(){return new Promise((function(e){h(""),l(),e()}))},generate:function(e){var n,t=e.name,a=e.attr,o={name:t,attr:a};return new Promise((function(e,t){c["a"].dabeGenerate(o).then((function(e){return n=e,c["a"].platGenerate(o)})).then((function(t){r["b"].setUser(n),e(t)})).catch(t)}))},sync:function(){return new Promise((function(e,n){c["a"].sync(r["a"].userName()).then((function(n){r["b"].setUser(n),e(n)})).catch(n)}))}}},"6ceb":function(e,n,t){"use strict";t("8f6f")},"8aa1":function(e,n,t){},"8f6f":function(e,n,t){},b775:function(e,n,t){"use strict";t("0721");var r=t("4f14"),a=t.n(r),c=t("371c"),o=a.a.create({baseURL:"/abe/"});o.interceptors.request.use((function(e){return e.headers["Access-Control-Allow-Origin"]="localhost:8081",e.headers["Access-Control-Allow-Methods"]="GET, POST, PATCH, PUT, DELETE, OPTIONS",e.headers["Access-Control-Allow-Headers"]="Origin, Content-Type, X-Auth-Token",e.crossdomain=!0,e}),(function(e){return Object(c["a"])("[request error]",e),Promise.reject(e)})),o.interceptors.response.use((function(e){var n=e.data;return 200!==n.code?Promise.reject(new Error(n.message||"Error")):n}),(function(e){return Promise.reject(e)})),n["a"]=o},c24f:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));t("bdf9"),t("0721");var r=t("b775"),a={signup:function(e){var n={userName:e.name,password:e.password,userType:e.role,channel:e.channel};return new Promise((function(e,t){Object(r["a"])({url:"/user/create",method:"post",data:n}).then((function(n){200===n.code?e(n.data):t(n)})).catch(t)}))},login:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t={fileName:e.name,password:e.password,cert:e.cert},a=n?"/dabe/user3":"/dabe/user2";return new Promise((function(e,n){Object(r["a"])({url:a,method:"post",data:t,params:t}).then((function(n){var t=n.data;e(t)})).catch(n)}))}}},f8ce:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));t("bdf9"),t("0721");var r=t("b775"),a=t("cc39"),c={dabe:function(e){return Object(a["a"])({appliedAttrMap:{},privacyAttrMap:{},APKMap:{"someone:friend":{GY:"[369150..., 601530...]"}},ASKMap:{"someone:friend":{Y:"791100..."}},EGGAlpha:"[206605..., 320061...]",Alpha:"907358...",GAlpha:"[569334..., 105875...]",OPKMap:{},OSKMap:{},UserType:"org",Channel:"myc"},e)},same:function(e){return e}},o={dabeGenerate:function(e){var n={fileName:e.name,attrName:e.attr};return new Promise((function(t,a){Object(r["a"])({url:"/dabe/user/attr",method:"post",data:n,params:n}).then((function(e){200===e.code?t(e.data):a(e)})).catch((function(n){n?t(c.dabe(e)):a(n)}))}))},platGenerate:function(e){var n={fileName:e.name,attrName:e.attr};return new Promise((function(t,a){Object(r["a"])({url:"/user/attr",method:"post",data:n,params:n}).then((function(e){200===e.code?t(e.data):a(e)})).catch((function(n){n?t(c.same(e)):a(n)}))}))},apply:function(e){var n=e.name,t=e.attr,a=e.to,c=e.org,o=e.remark,u={name:n,attr:t,to:a,org:c,remark:o},i={fileName:u.name,attrName:u.attr,toUserName:u.to,toOrgName:u.org,remark:u.remark};return new Promise((function(e,n){Object(r["a"])({url:"/user/attr/apply",method:"post",data:i}).then((function(t){200===t.code?e(t.data):n(t)})).catch(n)}))},applications:function(e){var n=e.to,t=e.role,a=e.user,c=e.status,o={to:n,role:t,user:a,status:c},u={toId:o.to,type:o.role,userName:o.user,status:o.status};return new Promise((function(e,n){Object(r["a"])({url:"/user/attr/apply",method:"get",params:u}).then((function(t){200===t.code?e(t.data):n(t)})).catch(n)}))},approval:function(e){var n=e.user,t=e.to,a=e.attr,c=e.remark,o=e.agree,u={user:n,to:t,attr:a,remark:c,agree:o},i={fileName:u.user,toUserName:u.to,attrName:u.attr,remark:u.remark,agree:u.agree};return new Promise((function(e,n){Object(r["a"])({url:"/user/attr/approval",method:"post",data:i}).then((function(t){200===t.code?e(t.data):n(t)})).catch(n)}))},sync:function(e){var n={fileName:e};return new Promise((function(e,t){Object(r["a"])({url:"/user/attr/sync",method:"post",data:n,params:n}).then((function(n){200===n.code?e(n.data):t(n)})).catch(t)}))},revoke:function(e){var n=e.userName,t=e.toUserName,a=e.attrName,c=e.remark,o={userName:n,toUserName:t,attrName:a,remark:c};return new Promise((function(e,n){Object(r["a"])({url:"/user/attr/revoke",method:"post",data:o,params:o}).then((function(t){200===t.code?e(t.data):n(t)})).catch(n)}))},history:function(e){var n={userName:e};return new Promise((function(e,t){Object(r["a"])({url:"/user/attr/history",method:"post",data:n,params:n}).then((function(n){200===n.code?e(n.data):t(n)})).catch(t)}))}}}});
//# sourceMappingURL=app.48f3ae13.js.map