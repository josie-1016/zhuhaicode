{"version":3,"sources":["webpack:///./src/views/Login.vue?cda0","webpack:///./src/views/Login.vue?13d6","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?fd9e","webpack:///./src/views/Login.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","imgHome","_v","ref","login","loginRules","model","value","callback","$$v","$set","expression","useCert","nativeOn","$event","type","indexOf","_k","keyCode","key","onLoginSubmit","apply","arguments","directives","name","rawName","on","selectFile","_s","certFileName","staticStyle","loading","staticRenderFns","mixins","components","data","password","cert","created","methods","$refs","loginForm","validate","valid","actions","input","document","createElement","onchange","file","e","target","files","reader","FileReader","readAsText","onload","content","readerEvent","result","serialNumber","click","jumpTo","redirect","$router","push","component"],"mappings":"gHAAA,W,yCCAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,KAAKC,MAAM,CAAC,IAAMP,EAAIQ,QAAQ,gBAAgBJ,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACE,YAAY,eAAe,CAACN,EAAIS,GAAG,QAAQL,EAAG,UAAU,CAACM,IAAI,YAAYH,MAAM,CAAC,MAAQP,EAAIW,MAAM,MAAQX,EAAIY,WAAW,iBAAiB,QAAQ,CAACR,EAAG,eAAe,CAACG,MAAM,CAAC,KAAO,SAAS,CAACH,EAAG,WAAW,CAACE,YAAY,aAAaC,MAAM,CAAC,YAAc,SAAS,UAAY,MAAMM,MAAM,CAACC,MAAOd,EAAIW,MAAU,KAAEI,SAAS,SAAUC,GAAMhB,EAAIiB,KAAKjB,EAAIW,MAAO,OAAQK,IAAME,WAAW,iBAAiB,IAAoB,IAAhBlB,EAAImB,QAAmBf,EAAG,eAAe,CAACG,MAAM,CAAC,KAAO,aAAa,CAACH,EAAG,WAAW,CAACE,YAAY,aAAaC,MAAM,CAAC,YAAc,QAAQ,gBAAgB,IAAIa,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAIA,EAAOC,KAAKC,QAAQ,QAAQvB,EAAIwB,GAAGH,EAAOI,QAAQ,QAAQ,GAAGJ,EAAOK,IAAI,SAAkB,KAAc1B,EAAI2B,cAAcC,MAAM,KAAMC,aAAahB,MAAM,CAACC,MAAOd,EAAIW,MAAc,SAAEI,SAAS,SAAUC,GAAMhB,EAAIiB,KAAKjB,EAAIW,MAAO,WAAYK,IAAME,WAAW,qBAAqB,GAAGd,EAAG,eAAe,CAACG,MAAM,CAAC,KAAO,SAAS,CAACH,EAAG,WAAW,CAAC0B,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASlB,OAAM,EAAQI,WAAW,UAAUZ,YAAY,aAAaO,MAAM,CAACC,MAAOd,EAAIW,MAAU,KAAEI,SAAS,SAAUC,GAAMhB,EAAIiB,KAAKjB,EAAIW,MAAO,OAAQK,IAAME,WAAW,gBAAgBd,EAAG,YAAY,CAACE,YAAY,aAAaC,MAAM,CAAC,KAAO,QAAQ0B,GAAG,CAAC,MAAQjC,EAAIkC,aAAa,CAAClC,EAAIS,GAAG,cAAcL,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACN,EAAIS,GAAG,IAAIT,EAAImC,GAAGnC,EAAIoC,cAAc,QAAQ,GAAGhC,EAAG,eAAe,CAACA,EAAG,YAAY,CAACE,YAAY,uBAAuB+B,YAAY,CAAC,MAAQ,QAAQ9B,MAAM,CAAC,QAAUP,EAAIsC,SAASL,GAAG,CAAC,MAAQjC,EAAI2B,gBAAgB,CAAC3B,EAAIS,GAAG,WAAW,IAAI,GAAGL,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,GAAK,CAAEwB,KAAM,YAAa,CAAC/B,EAAIS,GAAG,aAAa,IAAI,QACt4D8B,EAAkB,G,kECkDtB,GACER,KAAM,QACNS,OAAQ,CAAC,OAAX,OAAW,CAAX,UACEC,WAAY,GAEZC,KALF,WAMI,MAAO,CACL/B,MAAO,CACLoB,KAAM,GACNY,SAAU,GACVC,KAAM,IAERhC,WAAY,CACVmB,KAAM,CAAC,CAAf,+CACQY,SAAU,CAAC,CAAnB,8CACQC,KAAM,CAAC,CAAf,+CAEMR,aAAc,GACdjB,SAAS,EACTmB,SAAS,IAIbO,QAvBF,WAwBI,IAAJ,4BACQd,IACF9B,KAAKU,MAAMoB,KAAOA,IAItBe,QAAS,CACPnB,cADJ,WACA,WACM1B,KAAK8C,MAAMC,UAAUC,UAAS,SAApC,GACaC,IACL,EAAR,WACQC,EAAR,KACA,yBACA,iBACU,EAAV,UACY,QAAZ,OACY,KAAZ,YAEU,EAAV,YAEA,mBACU,EAAV,UACY,QAAZ,EACY,KAAZ,aAGA,oBACU,EAAV,mBAKIjB,WA1BJ,WA0BA,WACUkB,EAAQC,SAASC,cAAc,SACnCF,EAAM9B,KAAO,OAEb8B,EAAMG,SAAW,SAAvB,GACQ,IAAIC,EAAOC,EAAEC,OAAOC,MAAM,GAC1B,EAAR,oBAEQ,IAAIC,EAAS,IAAIC,WACjBD,EAAOE,WAAWN,EAAM,SAGxBI,EAAOG,OAAS,SAAxB,GACU,IAAIC,EAAUC,EAAYP,OAAOQ,OAC3C,gBACctB,EAAKuB,eACP,EAAZ,2CAKMf,EAAMgB,SAGRC,OAlDJ,WAmDM,IAAN,gCACUC,EAEFrE,KAAKsE,QAAQC,KAAK,CAA1B,SACA,iCCxI+tB,I,wBCQ3tBC,EAAY,eACd,EACA1E,EACAwC,GACA,EACA,KACA,WACA,MAIa,aAAAkC,E","file":"js/chunk-49f80927.b5be8ff1.js","sourcesContent":["export * from \"-!../../node_modules/.pnpm/registry.npmmirror.com+mini-css-extract-plugin@0.9.0_webpack@4.46.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/.pnpm/registry.npmmirror.com+css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/.pnpm/registry.npmmirror.com+postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=7c5e0689&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"sign\"},[_c('img',{staticClass:\"bg\",attrs:{\"src\":_vm.imgHome('cargo.jpg')}}),_c('div',{staticClass:\"sign-container\"},[_c('div',{staticClass:\"login-form\"},[_c('div',{staticClass:\"login-title\"},[_vm._v(\"登录\")]),_c('el-form',{ref:\"loginForm\",attrs:{\"model\":_vm.login,\"rules\":_vm.loginRules,\"label-position\":\"top\"}},[_c('el-form-item',{attrs:{\"prop\":\"name\"}},[_c('el-input',{staticClass:\"sign-input\",attrs:{\"placeholder\":\"请输入用户名\",\"maxlength\":\"11\"},model:{value:(_vm.login.name),callback:function ($$v) {_vm.$set(_vm.login, \"name\", $$v)},expression:\"login.name\"}})],1),(_vm.useCert === false)?_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('el-input',{staticClass:\"sign-input\",attrs:{\"placeholder\":\"请输入密码\",\"show-password\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.onLoginSubmit.apply(null, arguments)}},model:{value:(_vm.login.password),callback:function ($$v) {_vm.$set(_vm.login, \"password\", $$v)},expression:\"login.password\"}})],1):_c('el-form-item',{attrs:{\"prop\":\"cert\"}},[_c('el-input',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],staticClass:\"sign-input\",model:{value:(_vm.login.cert),callback:function ($$v) {_vm.$set(_vm.login, \"cert\", $$v)},expression:\"login.cert\"}}),_c('el-button',{staticClass:\"custom-btn\",attrs:{\"type\":\"text\"},on:{\"click\":_vm.selectFile}},[_vm._v(\" 上传证书文件 \")]),_c('div',{staticClass:\"text\"},[_vm._v(\" \"+_vm._s(_vm.certFileName)+\" \")])],1),_c('el-form-item',[_c('el-button',{staticClass:\"custom-btn login-btn\",staticStyle:{\"width\":\"100%\"},attrs:{\"loading\":_vm.loading},on:{\"click\":_vm.onLoginSubmit}},[_vm._v(\" 登录 \")])],1)],1),_c('div',{staticClass:\"register-link\"},[_c('router-link',{attrs:{\"to\":{ name: 'signup' }}},[_vm._v(\" 前往注册 \")])],1)],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"sign\">\n    <img class=\"bg\" :src=\"imgHome('cargo.jpg')\" />\n    <div class=\"sign-container\">\n      <div class=\"login-form\">\n        <div class=\"login-title\">登录</div>\n\n        <el-form ref=\"loginForm\" :model=\"login\" :rules=\"loginRules\" label-position=\"top\">\n          <el-form-item prop=\"name\">\n            <el-input class=\"sign-input\" v-model=\"login.name\" placeholder=\"请输入用户名\" maxlength=\"11\"></el-input>\n          </el-form-item>\n\n          <el-form-item prop=\"password\" v-if=\"useCert === false\">\n            <el-input class=\"sign-input\" v-model=\"login.password\" placeholder=\"请输入密码\" show-password\n              @keyup.enter.native=\"onLoginSubmit\"></el-input>\n          </el-form-item>\n\n          <el-form-item prop=\"cert\" v-else>\n            <el-input class=\"sign-input\" v-model=\"login.cert\" v-show=\"false\"></el-input>\n            <el-button class=\"custom-btn\" type=\"text\" @click=\"selectFile\"> 上传证书文件 </el-button>\n            <div class=\"text\">\n              {{ certFileName }}\n            </div>\n          </el-form-item>\n\n<!--          <el-form-item>-->\n<!--            或者-->\n<!--            <el-button class=\"custom-btn\" v-if=\"useCert === false\" type=\"text\" @click=\"useCert = true\">使用证书登录</el-button>-->\n<!--            <el-button class=\"custom-btn\" v-else type=\"text\" @click=\"useCert = false\">使用密码登录</el-button>-->\n<!--          </el-form-item>-->\n\n          <el-form-item>\n            <el-button class=\"custom-btn login-btn\" style=\"width: 100%\" @click=\"onLoginSubmit\" :loading=\"loading\">\n              登录\n            </el-button>\n          </el-form-item>\n        </el-form>\n        <div class=\"register-link\">\n          <router-link :to=\"{ name: 'signup' }\">\n            前往注册\n          </router-link>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { actions } from \"../store/actions\";\nimport { DynamicImage } from \"@/mixins/DynamicImage\";\n\nexport default {\n  name: \"Login\",\n  mixins: [DynamicImage(\"home/\")],\n  components: {},\n\n  data() {\n    return {\n      login: {\n        name: \"\",\n        password: \"\",\n        cert: \"\",\n      },\n      loginRules: {\n        name: [{ required: true, trigger: \"blur\", message: \"用户名不能为空\" }],\n        password: [{ required: true, trigger: \"blur\", message: \"密码不能为空\" }],\n        cert: [{ required: true, trigger: \"blur\", message: \"证书不能为空\" }],\n      },\n      certFileName: \"\",\n      useCert: false, // 是否使用证书登录，默认是用密码登录\n      loading: false,\n    };\n  },\n\n  created() {\n    const name = this.$route.query[\"name\"];\n    if (name) {\n      this.login.name = name;\n    }\n  },\n\n  methods: {\n    onLoginSubmit() {\n      this.$refs.loginForm.validate((valid) => {\n        if (!valid) return;\n        this.loading = true;\n        actions\n          .login(this.login, this.useCert)\n          .then(() => {\n            this.$message({\n              message: \"登录成功\",\n              type: \"success\",\n            });\n            this.jumpTo();\n          })\n          .catch((err) => {\n            this.$message({\n              message: err,\n              type: \"error\",\n            });\n          })\n          .finally(() => {\n            this.loading = false;\n          });\n      });\n    },\n\n    selectFile() {\n      var input = document.createElement(\"input\");\n      input.type = \"file\";\n\n      input.onchange = (e) => {\n        var file = e.target.files[0];\n        this.certFileName = file.name;\n        // setting up the reader\n        var reader = new FileReader();\n        reader.readAsText(file, \"UTF-8\");\n\n        // here we tell the reader what to do when it's done reading...\n        reader.onload = (readerEvent) => {\n          var content = readerEvent.target.result; // this is the content!\n          const cert = JSON.parse(content);\n          if (cert.serialNumber) {\n            this.login.cert = cert.serialNumber.split('-')[1];\n          }\n        };\n      };\n\n      input.click();\n    },\n\n    jumpTo() {\n      const redirect = this.$route.query[\"redirect\"];\n      if (redirect) {\n        // 登录成功后回到想看的页面\n        this.$router.push({ path: redirect });\n      } else this.$router.push({ path: \"/\" });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.sign {\n  position: relative;\n  height: calc(100vh - 104px);\n}\n\n.bg {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  background-size: cover;\n  background-position: center;\n  object-fit: cover;\n}\n\n.sign-container {\n  max-width: 600px;\n  margin: 60px auto;\n}\n\n.text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.login-form {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin: auto;\n  box-sizing: border-box;\n  width: 400px;\n  padding: 40px 60px;\n  border-radius: 20px;\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);\n  backdrop-filter: blur(10px);\n  background: radial-gradient(rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.3));\n}\n\n.login-title {\n  font-size: 28px;\n  margin-bottom: 20px;\n  font-weight: 600;\n}\n\n.el-form{\n  width: 100%;\n}\n\n.el-input {\n  box-sizing: border-box;\n  border-radius: 30px;\n  padding: 0 20px;\n  background-color: #fff;\n  border: none;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n}\n\n.custom-btn {\n  font-size: 16px;\n  color: var(--ft-color-0,black);\n  transition: color .1s ease-in-out, background-color .1s ease-in-out, border-color .1s ease-in-out;\n}\n\n.custom-btn:hover {\n  color: var(--prime-color-0,#1e3799);\n  background-color: inherit;\n  text-decoration: underline;\n}\n\n.login-btn {\n  height: 50px;\n  margin-top: 10px;  \n  border-width: 2px;\n  border-radius: 30px;\n  font-family: DM Sans;\n  font-size: 19px;\n  line-height: 19px;\n  text-decoration: none !important;\n  color: #fff;\n  border-style: solid;\n  border-color: transparent;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n  background-color: var(--prime-color-0, #252592);\n}\n\n.login-btn:hover {\n  border-color: var(--prime-color-0,#1e3799);\n}\n\n.register-link {\n  margin-top: 20px;\n  color: var(--ft-color-0, rgb(0, 0, 0));\n}\n\n.register-link a {\n  color: var(--ft-color-0, rgb(0, 0, 0));\n  font-size: 16px;\n}\n\n.el-input__inner {\n  border: none;\n}\n\n.sign-input>>>.el-input__inner {\n  border: none;\n  border-radius: 0;\n  background-color: transparent;\n  /* border-bottom: 1px solid #ccc; */\n}\n\n.sign-input>>>.el-input__inner:-webkit-autofill {\n  box-shadow: 0 0 0 1000px white inset !important;\n}\n\n/* 去除input自动填充时的背景色 https://blog.csdn.net/xxitcef/article/details/118146245 */\n.sign-input>>>.el-input__inner:-internal-autofill-previewed,\n.sign-input>>>.el-input__inner:-internal-autofill-selected {\n  -webkit-text-fill-color: #333 !important;\n  transition: background-color 5000s ease-in-out 0s !important;\n}\n</style>\n","import mod from \"-!../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/.pnpm/registry.nlark.com+thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../node_modules/.pnpm/registry.npmmirror.com+babel-loader@8.2.3_c5cihxqta4yrmitykip7so3rqm/node_modules/babel-loader/lib/index.js!../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/.pnpm/registry.nlark.com+thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../node_modules/.pnpm/registry.npmmirror.com+babel-loader@8.2.3_c5cihxqta4yrmitykip7so3rqm/node_modules/babel-loader/lib/index.js!../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=7c5e0689&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=7c5e0689&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7c5e0689\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}