(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49f80927"],{9334:function(e,t,i){"use strict";i("fbec")},a55b:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sign"},[i("img",{staticClass:"bg",attrs:{src:e.imgHome("cargo.jpg")}}),i("div",{staticClass:"sign-container"},[i("div",{staticClass:"login-form"},[i("div",{staticClass:"login-title"},[e._v("登录")]),i("el-form",{ref:"loginForm",attrs:{model:e.login,rules:e.loginRules,"label-position":"top"}},[i("el-form-item",{attrs:{prop:"name"}},[i("el-input",{staticClass:"sign-input",attrs:{placeholder:"请输入用户名",maxlength:"11"},model:{value:e.login.name,callback:function(t){e.$set(e.login,"name",t)},expression:"login.name"}})],1),!1===e.useCert?i("el-form-item",{attrs:{prop:"password"}},[i("el-input",{staticClass:"sign-input",attrs:{placeholder:"请输入密码","show-password":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onLoginSubmit.apply(null,arguments)}},model:{value:e.login.password,callback:function(t){e.$set(e.login,"password",t)},expression:"login.password"}})],1):i("el-form-item",{attrs:{prop:"cert"}},[i("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"sign-input",model:{value:e.login.cert,callback:function(t){e.$set(e.login,"cert",t)},expression:"login.cert"}}),i("el-button",{staticClass:"custom-btn",attrs:{type:"text"},on:{click:e.selectFile}},[e._v(" 上传证书文件 ")]),i("div",{staticClass:"text"},[e._v(" "+e._s(e.certFileName)+" ")])],1),i("el-form-item",[i("el-button",{staticClass:"custom-btn login-btn",staticStyle:{width:"100%"},attrs:{loading:e.loading},on:{click:e.onLoginSubmit}},[e._v(" 登录 ")])],1)],1),i("div",{staticClass:"register-link"},[i("router-link",{attrs:{to:{name:"signup"}}},[e._v(" 前往注册 ")])],1)],1)])])},n=[],a=(i("bdf9"),i("0721"),i("ac30"),i("f6a5"),i("63e0")),r=i("73f5"),o={name:"Login",mixins:[Object(r["a"])("home/")],components:{},data:function(){return{login:{name:"",password:"",cert:""},loginRules:{name:[{required:!0,trigger:"blur",message:"用户名不能为空"}],password:[{required:!0,trigger:"blur",message:"密码不能为空"}],cert:[{required:!0,trigger:"blur",message:"证书不能为空"}]},certFileName:"",useCert:!1,loading:!1}},created:function(){var e=this.$route.query["name"];e&&(this.login.name=e)},methods:{onLoginSubmit:function(){var e=this;this.$refs.loginForm.validate((function(t){t&&(e.loading=!0,a["a"].login(e.login,e.useCert).then((function(){e.$message({message:"登录成功",type:"success"}),e.jumpTo()})).catch((function(t){e.$message({message:t,type:"error"})})).finally((function(){e.loading=!1})))}))},selectFile:function(){var e=this,t=document.createElement("input");t.type="file",t.onchange=function(t){var i=t.target.files[0];e.certFileName=i.name;var s=new FileReader;s.readAsText(i,"UTF-8"),s.onload=function(t){var i=t.target.result,s=JSON.parse(i);s.serialNumber&&(e.login.cert=s.serialNumber.split("-")[1])}},t.click()},jumpTo:function(){var e=this.$route.query["redirect"];e?this.$router.push({path:e}):this.$router.push({path:"/"})}}},l=o,c=(i("9334"),i("52e0")),u=Object(c["a"])(l,s,n,!1,null,"7c5e0689",null);t["default"]=u.exports},fbec:function(e,t,i){}}]);
//# sourceMappingURL=chunk-49f80927.b5be8ff1.js.map