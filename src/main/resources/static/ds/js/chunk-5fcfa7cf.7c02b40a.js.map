{"version":3,"sources":["webpack:///./src/views/Login.vue?07f4","webpack:///./node_modules/core-js/modules/es.array.push.js","webpack:///./node_modules/core-js/internals/does-not-exceed-safe-integer.js","webpack:///./node_modules/core-js/internals/array-set-length.js","webpack:///./src/views/Login.vue","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?5d79","webpack:///./src/views/Login.vue?24a5","webpack:///./node_modules/core-js/internals/is-array.js"],"names":["$","toObject","lengthOfArrayLike","setArrayLength","doesNotExceedSafeInteger","fails","INCORRECT_TO_LENGTH","push","call","length","properErrorOnNonWritableLength","Object","defineProperty","writable","error","TypeError","FORCED","target","proto","arity","forced","item","O","this","len","argCount","arguments","i","$TypeError","MAX_SAFE_INTEGER","module","exports","it","DESCRIPTORS","isArray","getOwnPropertyDescriptor","SILENT_ON_NON_WRITABLE_LENGTH_SET","undefined","render","_vm","_c","_self","staticClass","attrs","slot","_v","name","ref","login","loginRules","model","value","callback","$$v","$set","expression","useCert","nativeOn","$event","type","indexOf","_k","keyCode","key","onLoginSubmit","apply","password","directives","rawName","cert","on","selectFile","_s","certFileName","staticStyle","loading","staticRenderFns","components","data","required","trigger","message","created","$route","query","methods","$refs","loginForm","validate","valid","actions","then","$message","jumpTo","catch","err","finally","input","document","createElement","onchange","e","file","files","reader","FileReader","readAsText","onload","readerEvent","content","result","JSON","parse","serialNumber","split","click","redirect","$router","path","component","classof","Array","argument"],"mappings":"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","file":"js/chunk-5fcfa7cf.7c02b40a.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=386d5412&prod&scoped=true&lang=css&\"","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar setArrayLength = require('../internals/array-set-length');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\nvar fails = require('../internals/fails');\n\nvar INCORRECT_TO_LENGTH = fails(function () {\n  return [].push.call({ length: 0x100000000 }, 1) !== 4294967297;\n});\n\n// V8 and Safari <= 15.4, FF < 23 throws InternalError\n// https://bugs.chromium.org/p/v8/issues/detail?id=12681\nvar properErrorOnNonWritableLength = function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).push();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n};\n\nvar FORCED = INCORRECT_TO_LENGTH || !properErrorOnNonWritableLength();\n\n// `Array.prototype.push` method\n// https://tc39.es/ecma262/#sec-array.prototype.push\n$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  push: function push(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    doesNotExceedSafeInteger(len + argCount);\n    for (var i = 0; i < argCount; i++) {\n      O[len] = arguments[i];\n      len++;\n    }\n    setArrayLength(O, len);\n    return len;\n  }\n});\n","var $TypeError = TypeError;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF; // 2 ** 53 - 1 == 9007199254740991\n\nmodule.exports = function (it) {\n  if (it > MAX_SAFE_INTEGER) throw $TypeError('Maximum allowed index exceeded');\n  return it;\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar isArray = require('../internals/is-array');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Safari < 13 does not throw an error in this case\nvar SILENT_ON_NON_WRITABLE_LENGTH_SET = DESCRIPTORS && !function () {\n  // makes no sense without proper strict mode support\n  if (this !== undefined) return true;\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).length = 1;\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n}();\n\nmodule.exports = SILENT_ON_NON_WRITABLE_LENGTH_SET ? function (O, length) {\n  if (isArray(O) && !getOwnPropertyDescriptor(O, 'length').writable) {\n    throw $TypeError('Cannot set read only .length');\n  } return O.length = length;\n} : function (O, length) {\n  return O.length = length;\n};\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"sign\"},[_c('div',{staticClass:\"sign-container\"},[_c('el-card',{staticClass:\"sign-card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"登录\")]),_c('router-link',{staticClass:\"sign-card-header--button\",attrs:{\"to\":{ name: 'signup' }}},[_vm._v(\" 前往注册 \")])],1),_c('el-form',{ref:\"loginForm\",attrs:{\"model\":_vm.login,\"rules\":_vm.loginRules,\"label-position\":\"top\"}},[_c('el-form-item',{attrs:{\"prop\":\"name\",\"label\":\"用户名\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入用户名\",\"maxlength\":\"11\"},model:{value:(_vm.login.name),callback:function ($$v) {_vm.$set(_vm.login, \"name\", $$v)},expression:\"login.name\"}})],1),(_vm.useCert === false)?_c('el-form-item',{attrs:{\"prop\":\"password\",\"label\":\"密码\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入密码\",\"show-password\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.onLoginSubmit.apply(null, arguments)}},model:{value:(_vm.login.password),callback:function ($$v) {_vm.$set(_vm.login, \"password\", $$v)},expression:\"login.password\"}})],1):_c('el-form-item',{attrs:{\"prop\":\"cert\",\"label\":\"证书\"}},[_c('el-input',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],model:{value:(_vm.login.cert),callback:function ($$v) {_vm.$set(_vm.login, \"cert\", $$v)},expression:\"login.cert\"}}),_c('el-button',{on:{\"click\":_vm.selectFile}},[_vm._v(\" 上传证书文件 \")]),_c('div',{staticClass:\"text\"},[_vm._v(\" \"+_vm._s(_vm.certFileName)+\" \")])],1),_c('el-form-item',[(_vm.useCert === false)?_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.useCert = true}}},[_vm._v(\"使用证书登录\")]):_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.useCert = false}}},[_vm._v(\"使用密码登录\")])],1),_c('el-form-item',[_c('el-button',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.onLoginSubmit}},[_vm._v(\" 登录 \")])],1)],1)],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"sign\">\n    <div class=\"sign-container\">\n      <el-card class=\"sign-card\">\n        <div slot=\"header\" class=\"clearfix\">\n          <span>登录</span>\n          <router-link :to=\"{ name: 'signup' }\" class=\"sign-card-header--button\">\n            前往注册\n          </router-link>\n        </div>\n\n        <el-form ref=\"loginForm\" :model=\"login\" :rules=\"loginRules\" label-position=\"top\">\n          <el-form-item prop=\"name\" label=\"用户名\">\n            <el-input v-model=\"login.name\" placeholder=\"请输入用户名\" maxlength=\"11\"></el-input>\n          </el-form-item>\n\n          <el-form-item prop=\"password\" label=\"密码\" v-if=\"useCert === false\">\n            <el-input\n              v-model=\"login.password\"\n              placeholder=\"请输入密码\"\n              show-password\n              @keyup.enter.native=\"onLoginSubmit\"\n            ></el-input>\n          </el-form-item>\n\n          <el-form-item prop=\"cert\" label=\"证书\" v-else>\n            <el-input v-model=\"login.cert\" v-show=\"false\"></el-input>\n            <el-button @click=\"selectFile\"> 上传证书文件 </el-button>\n            <div class=\"text\">\n              {{ certFileName }}\n            </div>\n          </el-form-item>\n\n          <el-form-item>\n            <el-button v-if=\"useCert === false\" type=\"text\" @click=\"useCert = true\"\n              >使用证书登录</el-button\n            >\n            <el-button v-else type=\"text\" @click=\"useCert = false\">使用密码登录</el-button>\n          </el-form-item>\n\n          <el-form-item>\n            <el-button style=\"width: 100%\" type=\"primary\" @click=\"onLoginSubmit\" :loading=\"loading\">\n              登录\n            </el-button>\n          </el-form-item>\n        </el-form>\n      </el-card>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { actions } from \"../store/actions\";\n\nexport default {\n  name: \"Login\",\n  components: {},\n\n  data() {\n    return {\n      login: {\n        name: \"\",\n        password: \"\",\n        cert: \"\",\n      },\n      loginRules: {\n        name: [{ required: true, trigger: \"blur\", message: \"用户名不能为空\" }],\n        password: [{ required: true, trigger: \"blur\", message: \"密码不能为空\" }],\n        cert: [{ required: true, trigger: \"blur\", message: \"证书不能为空\" }],\n      },\n      certFileName: \"\",\n      useCert: false, // 是否使用证书登录，默认是用密码登录\n      loading: false,\n    };\n  },\n\n  created() {\n    const name = this.$route.query[\"name\"];\n    if (name) {\n      this.login.name = name;\n    }\n  },\n\n  methods: {\n    onLoginSubmit() {\n      this.$refs.loginForm.validate((valid) => {\n        if (!valid) return;\n        this.loading = true;\n        actions\n          .login(this.login, this.useCert)\n          .then(() => {\n            this.$message({\n              message: \"登录成功\",\n              type: \"success\",\n            });\n            this.jumpTo();\n          })\n          .catch((err) => {\n            this.$message({\n              message: err,\n              type: \"error\",\n            });\n          })\n          .finally(() => {\n            this.loading = false;\n          });\n      });\n    },\n\n    selectFile() {\n      var input = document.createElement(\"input\");\n      input.type = \"file\";\n\n      input.onchange = (e) => {\n        var file = e.target.files[0];\n        this.certFileName = file.name;\n        // setting up the reader\n        var reader = new FileReader();\n        reader.readAsText(file, \"UTF-8\");\n\n        // here we tell the reader what to do when it's done reading...\n        reader.onload = (readerEvent) => {\n          var content = readerEvent.target.result; // this is the content!\n          const cert = JSON.parse(content);\n          if (cert.serialNumber) {\n            this.login.cert = cert.serialNumber.split('-')[1];\n          }\n        };\n      };\n\n      input.click();\n    },\n\n    jumpTo() {\n      const redirect = this.$route.query[\"redirect\"];\n      if (redirect) {\n        // 登录成功后回到想看的页面\n        this.$router.push({ path: redirect });\n      } else this.$router.push({ path: \"/\" });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.sign-container {\n  max-width: 600px;\n  margin: 60px auto;\n}\n\n.sign-card {\n  width: 400px;\n  margin: auto;\n}\n\n.sign-card-header--button {\n  float: right;\n  text-decoration: none;\n  color: #79bbff;\n}\n\n.sign-card-header--button:hover {\n  color: #409eff;\n}\n\n.text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=386d5412&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=386d5412&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"386d5412\",\n  null\n  \n)\n\nexport default component.exports","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) == 'Array';\n};\n"],"sourceRoot":""}